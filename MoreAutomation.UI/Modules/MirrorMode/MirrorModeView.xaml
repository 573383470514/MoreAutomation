<UserControl x:Class="MoreAutomation.UI.Modules.MirrorMode.MirrorModeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid Background="#FFFFFF">
        <TabControl Margin="10">
            <!-- è§’è‰²ç®¡ç†é€‰é¡¹å¡ -->
            <TabItem Header="è§’è‰²ç®¡ç†">
                <StackPanel Margin="10" VerticalAlignment="Top">
                    <TextBlock Text="å½“å‰è§’è‰²" FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>
                    <Border BorderBrush="#DDD" BorderThickness="1" Padding="15" Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="{Binding CurrentRole}" FontSize="16" Foreground="#333" Margin="0,5"/>
                            <TextBlock Text="å®¢æˆ·ç«¯ID:" Margin="0,10,0,5" Foreground="#666"/>
                            <TextBlock Text="{Binding ClientId}" FontSize="12" Foreground="#333" Margin="10,0"/>
                        </StackPanel>
                    </Border>
                    
                    <TextBlock Text="è§’è‰²åˆ‡æ¢" FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                        <Button Content="è®¾ä¸ºä¸»æŽ§" Command="{Binding SetMasterCommand}" Padding="12,8" Background="#2196F3" Foreground="White" Margin="0,0,10,0"/>
                        <Button Content="è®¾ä¸ºä»Žåº”" Command="{Binding SetFollowerCommand}" Padding="12,8" Background="#FF9800" Foreground="White"/>
                    </StackPanel>
                    
                    <TextBlock Text="è¿½éšç®¡ç†" FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>
                    <ListBox ItemsSource="{Binding ConnectedFollowers}" Height="150" BorderBrush="#DDD" BorderThickness="1" Margin="0,0,0,20">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding}" Margin="5"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                    
                    <TextBlock Text="æ“ä½œæ—¥å¿—" FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>
                    <TextBox Text="{Binding MirrorLog}" Height="120" IsReadOnly="True" TextWrapping="Wrap" 
                             VerticalScrollBarVisibility="Auto" AcceptsReturn="True" Margin="0,0,0,20"/>
                    
                    <Button Content="æ¸…ç©ºæ—¥å¿—" Command="{Binding ClearLogCommand}" Padding="12,8" Width="100"/>
                </StackPanel>
            </TabItem>
            
            <!-- åæ ‡é‡‡é›†é€‰é¡¹å¡ -->
            <TabItem Header="åæ ‡é‡‡é›†">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="300"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- å·¦ä¾§ï¼šé‡‡é›†é¢„è§ˆç”»å¸ƒ -->
                    <Border Grid.Column="0" Background="#F5F5F5" BorderBrush="#DDD" BorderThickness="1" Margin="10">
                        <Canvas x:Name="CaptureCanvas" Background="Black" MouseDown="CaptureCanvas_MouseDown">
                            <!-- ç½‘æ ¼çº¿å°†åœ¨ CodeBehind ä¸­åŠ¨æ€ç»˜åˆ¶ -->
                        </Canvas>
                    </Border>
                    
                    <!-- å³ä¾§ï¼šé‡‡é›†æŽ§åˆ¶é¢æ¿ -->
                    <StackPanel Grid.Column="1" Margin="10,10,10,10" VerticalAlignment="Top">
                        <TextBlock Text="åæ ‡é‡‡é›†" FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>
                        
                        <TextBlock Text="æ“ä½œåç§°:" Foreground="#666" Margin="0,0,0,5"/>
                        <TextBox Text="{Binding ActionName}" Padding="5" Margin="0,0,0,10"/>
                        
                        <TextBlock Text="æ“ä½œæè¿°:" Foreground="#666" Margin="0,0,0,5"/>
                        <TextBox Text="{Binding ActionDescription}" Padding="5" Height="60" TextWrapping="Wrap" AcceptsReturn="True" Margin="0,0,0,10"/>
                        
                        <TextBlock Text="é‡‡é›†çŠ¶æ€:" Foreground="#666" Margin="0,0,0,5"/>
                        <TextBlock Text="{Binding CaptureStatus}" Foreground="#333" Margin="0,0,0,10" Height="30" TextWrapping="Wrap"/>
                        
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                            <Button Content="å¼€å§‹é‡‡é›†" Command="{Binding StartCaptureCommand}" Padding="10,8" Background="#4CAF50" Foreground="White" Width="90" Margin="0,0,5,0"/>
                            <Button Content="ç»“æŸé‡‡é›†" Command="{Binding EndCaptureCommand}" Padding="10,8" Background="#F44336" Foreground="White" Width="90"/>
                        </StackPanel>
                        
                        <TextBlock Text="å·²é‡‡é›†: {Binding CapturedCount}} ä¸ªç‚¹" Foreground="#666" Margin="0,0,0,10"/>
                        
                        <ListBox ItemsSource="{Binding CapturedCoordinates}" Height="150" BorderBrush="#DDD" BorderThickness="1" Margin="0,0,0,10">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}" Margin="5"/>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                        
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                            <Button Content="ä¿å­˜" Command="{Binding SaveCaptureCommand}" Padding="10,8" Background="#2196F3" Foreground="White" Width="70" Margin="0,0,5,0"/>
                            <Button Content="æ¸…é™¤" Command="{Binding ClearCaptureCommand}" Padding="10,8" Background="#999" Foreground="White" Width="70"/>
                        </StackPanel>
                        
                        <Separator Margin="0,10"/>
                        <TextBlock Text="å·²ä¿å­˜çš„åŠ¨ä½œ" FontSize="12" FontWeight="Bold" Margin="0,10,0,10"/>
                        <ListBox ItemsSource="{Binding SavedActions}" SelectedItem="{Binding SelectedActionName}" Height="150" BorderBrush="#DDD" BorderThickness="1" Margin="0,0,0,10">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding}" Margin="5"/>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                        
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                            <Button Content="åŠ è½½" Command="{Binding LoadActionCommand}" Padding="10,8" Background="#FF9800" Foreground="White" Width="70" Margin="0,0,5,0"/>
                            <Button Content="åˆ é™¤" Command="{Binding DeleteActionCommand}" Padding="10,8" Background="#F44336" Foreground="White" Width="70"/>
                        </StackPanel>
                        
                        <Separator Margin="0,10"/>
                        <TextBlock Text="æ‰§è¡ŒåŠ¨ä½œ" FontSize="12" FontWeight="Bold" Margin="0,10,0,10"/>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                            <Button Content="æ‰§è¡Œ" Command="{Binding ExecuteActionCommand}" Padding="10,8" Background="#4CAF50" Foreground="White" Width="70" Margin="0,0,5,0"/>
                            <Button Content="åœæ­¢" Command="{Binding StopExecutionCommand}" Padding="10,8" Background="#F44336" Foreground="White" Width="70"/>
                        </StackPanel>
                        
                        <TextBlock Text="æ‰§è¡ŒçŠ¶æ€:" Foreground="#666" Margin="0,0,0,5" FontSize="11"/>
                        <TextBlock Text="{Binding ExecutionStatus}" Foreground="#333" Margin="0,0,0,10" Padding="5" Background="#F5F5F5" Height="40" TextWrapping="Wrap" VerticalAlignment="Top"/>
                        
                        <ProgressBar Value="{Binding ExecutionProgress}" Minimum="0" Maximum="100" Height="8" Margin="0,0,0,10" Background="#E0E0E0" Foreground="#4CAF50"/>
                    </StackPanel>
                </Grid>
            </TabItem>
            
            <!-- åŽå°é…ç½®é€‰é¡¹å¡ -->
            <TabItem Header="åŽå°é…ç½®">
                <StackPanel Margin="15" VerticalAlignment="Top">
                    <TextBlock Text="åŽå°è‡ªåŠ¨åŒ–é…ç½®" FontSize="14" FontWeight="Bold" Margin="0,0,0,15"/>
                    
                    <Border BorderBrush="#E0E0E0" BorderThickness="1" Padding="15" Margin="0,0,0,15" Background="#FAFAFA">
                        <StackPanel>
                            <CheckBox IsChecked="{Binding ConfigBackgroundMode}" Content="å¯ç”¨åŽå°æ¨¡å¼ï¼ˆå…è®¸æœ€å°åŒ–/éšè—çª—å£è¿è¡Œè‡ªåŠ¨åŒ–ï¼‰" Margin="0,0,0,10" FontSize="12"/>
                            <TextBlock Text="âœ“ å¯ç”¨åŽå°æ¨¡å¼åŽï¼Œåº”ç”¨å¯åœ¨æœ€å°åŒ–æˆ–åŽå°çŠ¶æ€ä¸‹æ‰§è¡Œåæ ‡ç‚¹å‡»æ“ä½œ" Foreground="#666" FontSize="11" Margin="20,0,0,0" TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>
                    
                    <Border BorderBrush="#E0E0E0" BorderThickness="1" Padding="15" Margin="0,0,0,15" Background="#FAFAFA">
                        <StackPanel>
                            <CheckBox IsChecked="{Binding ConfigUseVirtualDisplay}" Content="ä½¿ç”¨è™šæ‹Ÿæ˜¾å­˜æˆªå›¾ï¼ˆGPUåŠ é€Ÿï¼‰" Margin="0,0,0,10" FontSize="12"/>
                            <TextBlock Text="âœ“ è™šæ‹Ÿæ˜¾å­˜æ¨¡å¼ï¼šåœ¨åŽå°æˆªå›¾ç›®æ ‡çª—å£ï¼ˆä¸éœ€è¦çª—å£å¯è§ï¼‰" Foreground="#666" FontSize="11" Margin="20,0,0,0" TextWrapping="Wrap"/>
                            <TextBlock Text="âœ— æ™®é€šæ¨¡å¼ï¼šéœ€è¦ç›®æ ‡çª—å£å¯è§æ‰èƒ½æˆªå›¾" Foreground="#999" FontSize="11" Margin="20,0,0,10" TextWrapping="Wrap"/>
                            
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="100"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="100"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Grid.Column="0" Text="è™šæ‹Ÿå±å¹•åˆ†è¾¨çŽ‡ï¼š" Margin="0,0,10,0" VerticalAlignment="Center" FontSize="12"/>
                                <TextBox Grid.Column="1" Text="{Binding ConfigDisplayWidth}" Padding="5" Margin="0,0,10,0"/>
                                <TextBlock Grid.Column="2" Text=" x " VerticalAlignment="Center" Margin="0,0,10,0"/>
                                <TextBox Grid.Column="3" Text="{Binding ConfigDisplayHeight}" Padding="5"/>
                            </Grid>
                        </StackPanel>
                    </Border>
                    
                    <Border BorderBrush="#E0E0E0" BorderThickness="1" Padding="15" Margin="0,0,0,15" Background="#FAFAFA">
                        <StackPanel>
                            <TextBlock Text="è¾“å…¥æ¨¡å¼ï¼ˆé¼ æ ‡/é”®ç›˜æ“ä½œæ–¹å¼ï¼‰:" Margin="0,0,0,10" FontSize="12" FontWeight="Bold"/>
                            <StackPanel Orientation="Horizontal" Margin="20,0,0,10">
                                <Button Content="ðŸ”’ åŽŸç”Ÿæ¨¡å¼ (ç³»ç»Ÿä½Žçº§Hook)" IsEnabled="{Binding IsInputNative}" Padding="10,8" Background="#2196F3" Foreground="White" Margin="0,0,10,0"/>
                                <Button Content="ðŸ”“ æ¨¡æ‹Ÿæ¨¡å¼ (InputSimulator)" IsEnabled="{Binding IsInputSimulated}" Padding="10,8" Background="#4CAF50" Foreground="White"/>
                            </StackPanel>
                            <TextBlock Text="ðŸ’¡ åŽŸç”Ÿæ¨¡å¼ï¼šåŽå°ä¸å¯è§ï¼Œä½†æŸäº›æ¸¸æˆå¯èƒ½æ£€æµ‹ï¼›æ¨¡æ‹Ÿæ¨¡å¼ï¼šæ›´æ˜“è¢«æ£€æµ‹ä½†å…¼å®¹æ€§å¥½" Foreground="#666" FontSize="11" Margin="20,0,0,0" TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>
                    
                    <TextBlock Text="çŠ¶æ€è¯´æ˜Ž:" FontSize="12" FontWeight="Bold" Margin="0,20,0,10"/>
                    <TextBlock Text="â€¢ åŽå°æ¨¡å¼ + è™šæ‹Ÿæ˜¾å­˜ = å®Œå…¨éšéï¼šçª—å£éšè—ï¼Œä½¿ç”¨ç¦»å±æ¸²æŸ“è¿›è¡Œè§†è§‰è¯†åˆ«å’Œç‚¹å‡»" Foreground="#777" FontSize="11" Margin="0,5,0,5"/>
                    <TextBlock Text="â€¢ ä»…å¯ç”¨åŽå°æ¨¡å¼ = å…è®¸æœ€å°åŒ–ï¼šçª—å£æœ€å°åŒ–æ—¶çº¯åæ ‡ç‚¹å‡»ï¼ˆå‡æœ€å°åŒ–ï¼‰" Foreground="#777" FontSize="11" Margin="0,5,0,5"/>
                    <TextBlock Text="â€¢ å…³é—­åŽå°æ¨¡å¼ = ä¼ ç»Ÿæ¨¡å¼ï¼šéœ€è¦çª—å£å¯è§ï¼Œç‚¹å‡»æ—¶çª—å£æ¿€æ´»" Foreground="#777" FontSize="11" Margin="0,5,0,15"/>
                    
                    <Button Content="ä¿å­˜é…ç½®" Command="{Binding SaveBackgroundConfigCommand}" Padding="12,8" Background="#4CAF50" Foreground="White" Width="100"/>
                </StackPanel>
            </TabItem>
        </TabControl>
    </Grid>
</UserControl>
