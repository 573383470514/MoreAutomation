<UserControl x:Class="MoreAutomation.UI.Modules.DeveloperTools.DeveloperToolsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Text="开发者工具 (参数调整)" FontSize="16" FontWeight="Bold" Margin="0,0,0,10"/>

        <TabControl Grid.Row="1">
            <!-- 调优参数选项卡 -->
            <TabItem Header="调优参数">
                <ScrollViewer>
                    <StackPanel Margin="10">
                        <TextBlock Text="自动化帧延迟 (ms)" Margin="0,0,0,5" FontWeight="Bold"/>
                        <Slider Minimum="10" Maximum="500" Value="{Binding FrameDelayMs}" Margin="0,0,0,10"/>
                        <TextBlock Text="{Binding FrameDelayMs}" Margin="0,0,0,10"/>

                        <TextBlock Text="暂停轮询延迟 (ms)" Margin="0,0,0,5" FontWeight="Bold"/>
                        <Slider Minimum="100" Maximum="2000" Value="{Binding PausePollingDelayMs}" Margin="0,0,0,10"/>
                        <TextBlock Text="{Binding PausePollingDelayMs}" Margin="0,0,0,10"/>

                        <TextBlock Text="最大重试次数" Margin="0,0,0,5" FontWeight="Bold"/>
                        <Slider Minimum="1" Maximum="10" Value="{Binding MaxRetries}" Margin="0,0,0,10"/>
                        <TextBlock Text="{Binding MaxRetries}" Margin="0,0,0,10"/>

                        <TextBlock Text="重试延迟 (ms)" Margin="0,0,0,5" FontWeight="Bold"/>
                        <Slider Minimum="50" Maximum="1000" Value="{Binding RetryDelayMs}" Margin="0,0,0,10"/>
                        <TextBlock Text="{Binding RetryDelayMs}" Margin="0,0,0,10"/>

                        <TextBlock Text="退避因子" Margin="0,0,0,5" FontWeight="Bold"/>
                        <Slider Minimum="1.0" Maximum="3.0" TickFrequency="0.1" Value="{Binding RetryBackoffFactor}" Margin="0,0,0,10"/>
                        <TextBlock Text="{Binding RetryBackoffFactor}" Margin="0,0,0,10"/>

                        <TextBlock Text="熔断阈值" Margin="0,0,0,5" FontWeight="Bold"/>
                        <Slider Minimum="5" Maximum="50" Value="{Binding CircuitTripThreshold}" Margin="0,0,0,10"/>
                        <TextBlock Text="{Binding CircuitTripThreshold}" Margin="0,0,0,10"/>

                        <Button Content="保存调优参数" Command="{Binding SaveTuningParamsCommand}" Width="150" Margin="0,20,0,0"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- 功能开关选项卡 -->
            <TabItem Header="功能开关">
                <ScrollViewer>
                    <StackPanel Margin="10">
                        <TextBlock Text="当前功能开关" FontSize="12" Margin="0,0,0,10"/>
                        <ItemsControl ItemsSource="{Binding FeatureToggles}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Grid Margin="0,5,0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="200"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="{Binding Key}" VerticalAlignment="Center"/>
                                        <CheckBox Grid.Column="1" IsChecked="{Binding Enabled}" VerticalAlignment="Center"/>
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- 坐标捕捉选项卡 -->
            <TabItem Header="坐标捕捉">
                <StackPanel Margin="10">
                    <TextBlock Text="坐标捕捉工具" FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>
                    <TextBlock Text="状态：" Margin="0,0,0,5"/>
                    <TextBlock Text="{Binding CoordinateCaptureStatus}" Margin="10,0,0,10" Foreground="Blue"/>

                    <Button Content="启用坐标捕捉" Command="{Binding EnableCoordinateCaptureCommand}" Width="150" Margin="0,0,0,5"/>
                    <Button Content="禁用坐标捕捉" Command="{Binding DisableCoordinateCaptureCommand}" Width="150"/>

                    <TextBlock Text="最后捕捉坐标：" Margin="0,20,0,5"/>
                    <TextBlock Text="{Binding LastCapturedCoordinate}" Margin="10,0,0,0" Foreground="Green"/>

                    <TextBlock Text="使用说明：激活后，在游戏窗口中按 Ctrl+Alt+C 可捕捉当前鼠标位置的比例坐标。" 
                               TextWrapping="Wrap" Margin="0,20,0,0" Foreground="Gray" FontSize="11"/>
                </StackPanel>
            </TabItem>
        </TabControl>

        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="关闭" Width="80" Margin="0,0,5,0"/>
        </StackPanel>
    </Grid>
</UserControl>
